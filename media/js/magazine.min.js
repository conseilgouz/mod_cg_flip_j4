function addPage(e,i,t,h){i.turn("pages");var n=jQuery("<div />",{});i.turn("addPage",n,e)&&(n.html('<div class="gradient"></div><div class="loader"></div>'),loadPage(e,n,t,h))}function loadPage(e,i,t,h){var n=jQuery("<img />");n.mousedown(function(e){e.preventDefault()}),n.on("load",function(){jQuery(this).css({width:"100%",height:"100%"}),jQuery(this).appendTo(i),i.find(".loader").remove()}),n.attr("src",t+"/"+h)}function isChrome(){return-1!=navigator.userAgent.indexOf("Chrome")}function resizeViewport(e){var i=jQuery(window).width(),t=jQuery(window).height(),h=jQuery(e+" .magazine").turn("options");if(jQuery(e+" .magazine").removeClass("animated"),jQuery(e+" .magazine-viewport").css({width:i,height:t}),1==jQuery(e+" .magazine").turn("zoom")){var n=calculateBound({width:h.width,height:h.height,boundWidth:Math.min(h.width,i),boundHeight:Math.min(h.height,t)});n.width%2!=0&&(n.width-=1),n.width==jQuery(e+" .magazine").width()&&n.height==jQuery(e+".magazine").height()||(jQuery(e+" .magazine").turn("size",n.width,n.height),1==jQuery(e+" .magazine").turn("page")&&jQuery(e+" .magazine").turn("peel","br"),jQuery(e+" .next-button").css({height:n.height,backgroundPosition:"-38px "+(n.height/2-16)+"px"}),jQuery(e+" .previous-button").css({height:n.height,backgroundPosition:"-4px "+(n.height/2-16)+"px"})),jQuery(e+" .magazine").css({top:-n.height/2,left:-n.width/2})}var a=jQuery(e+" .magazine").offset();a.top,jQuery(e+" .magazine").height(),jQuery(" .thumbnails > div").height();a.top<jQuery(".made").height()?jQuery(".made").hide():jQuery(".made").show(),jQuery(e+" .magazine").addClass("animated")}function calculateBound(e){var i={width:e.width,height:e.height};if(i.width>e.boundWidth||i.height>e.boundHeight){var t=i.width/i.height;e.boundWidth/t>e.boundHeight&&e.boundHeight*t<=e.boundWidth?(i.width=Math.round(e.boundHeight*t),i.height=e.boundHeight):(i.width=e.boundWidth,i.height=Math.round(e.boundWidth/t))}return i}