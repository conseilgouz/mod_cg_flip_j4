var $timestp=0;function go_flip(e,a,t,i){var n=".cg_flip_"+a,o=t.ratio,s=e(n+" #magazine-viewport").outerWidth(!0),g=s<768,r=s*o/2;if("dir"==t.type||"files"==t.type)if(i){var p,c=[];for(p in t.files)c.push(t.files[p])}else c=t.files;else{c=[];e(n+" .cg_flip_article").each(function(){c.push(e(this).html())}),i&&(t.nbpages=c.length)}if(e(n+" .cg_flip_menu").click(function(){return e(n+" #cg_aide").hasClass("cg_show")?e(n+" #cg_aide").removeClass("cg_show"):e(n+" #cg_aide").addClass("cg_show"),!1}),e(n+" #cg_aide").click(function(){e(n+" #cg_aide").removeClass("cg_show")}),e(n+" .magazine").turn({elevation:50,acceleration:!isChrome(),gradients:!0,autoCenter:!0,pages:parseInt(t.nbpages),display:"double",height:r,when:{turning:function(a,t,i){var o=e(this);o.turn("page"),o.turn("pages");e(n+" #cg_flip_page").text(t)},turned:function(a,i,o){e(this).turn("center"),1==i&&e(this).turn("peel","br"),e(n+" .go_page").click(function(){$page=e(this).attr("data-page"),n=".cg_flip_"+e(this).attr("data-id"),e(n+" .magazine").turn("page",$page)}),e(n+" #magazine-viewport").outerWidth(!0)>767&&o.forEach(function(a){e(n+" .page.p"+a).off("click"),e(n+" .page.p"+a).click(function(i){e(n+" .magazine").turn("zoom")>1||(e(n+" #cg_page").hasClass("ison-doc")?(a=this.parentNode.parentNode.getAttribute("page"),e(n+" #cg_zoom_in").addClass("cg_hide"),e(n+" .magazine").turn("display","single"),$turn_options=e(n+" .magazine").turn("options"),e(n+" .magazine").turn("size",$turn_options.width,2*$turn_options.height),e(n+" #cg_page").removeClass("ison-doc").addClass("ison-book-open"),e(n+" #cg_page").attr({title:t.twopages}),e(n+" .magazine").turn("page",a).turn("stop")):(e(n+" #cg_zoom_in").removeClass("cg_hide"),e(n+" .magazine").turn("display","double"),$turn_options=e(n+" .magazine").turn("options"),e(n+" .magazine").turn("size",$turn_options.width,$turn_options.height),e(n+" #cg_page").removeClass("ison-book-open").addClass("ison-doc"),e(n+" #cg_page").attr({title:t.onepage}),e(n+" .magazine").css("height:"+$turn_options.height),e(n+" .magazine-viewport").css("height:"+$turn_options.height)))})})},missing:function(a,i){if("dir"==t.type||"files"==t.type)for(var n=0;n<i.length;n++)addPage(i[n],e(this),t.base,c[i[n]-1]);else for(n=0;n<c.length;n++)e(this).turn("addPage",c[n],n+1)}}}),e(window).keydown(function(a){switch(a.keyCode){case 36:e(n+" .magazine").turn("page",1),a.preventDefault();break;case 37:case 33:e(n+" .magazine").turn("previous"),a.preventDefault();break;case 39:case 34:e(n+" .magazine").turn("next"),a.preventDefault();break;case 35:e(n+" .magazine").turn("page",e(n+" .magazine").turn("pages")),a.preventDefault();break;case 106:case 220:if(e(n+" #cg_onepage").hasClass("cg_hide"))return a.preventDefault(),!0;e(n+" #cg_page").hasClass("ison-doc")?(e(n+" #cg_zoom_in").addClass("cg_hide"),e(n+" .magazine").turn("display","single"),$turn_options=e(n+" .magazine").turn("options"),e(n+" .magazine").turn("size",$turn_options.width,2*$turn_options.height),e(n+" #cg_page").removeClass("ison-doc").addClass("ison-book-open"),e(n+" #cg_page").attr({title:t.twopages})):(e(n+" #cg_zoom_in").removeClass("cg_hide"),e(n+" .magazine").turn("display","double"),$turn_options=e(n+" .magazine").turn("options"),e(n+" .magazine").turn("size",$turn_options.width,$turn_options.height),e(n+" #cg_page").removeClass("ison-book-open").addClass("ison-doc"),e(n+" #cg_page").attr({title:t.onepage}),e(n+" .magazine").css("height:"+$turn_options.height),e(n+" .magazine-viewport").css("height:"+$turn_options.height)),a.preventDefault()}}),e(n+" .go_page").click(function(){$page=e(this).attr("data-page"),n=".cg_flip_"+e(this).attr("data-id"),e(n+" .magazine").turn("page",$page)}),e(n+" .cg_first").click(function(){n=".cg_flip_"+e(this).attr("data-id"),e(n+" .magazine").turn("page",1)}),e(n+" .cg_prev").click(function(a){n=".cg_flip_"+e(this).attr("data-id"),e(n+" .magazine").turn("previous")}),e(n+" .cg_next").click(function(a){n=".cg_flip_"+e(this).attr("data-id"),e(n+" .magazine").turn("next")}),e(n+" .cg_last").click(function(){n=".cg_flip_"+e(this).attr("data-id"),e(n+" .magazine").turn("page",e(n+" .magazine").turn("pages"))}),e(n+" #cg_page").click(function(){e(n+" #cg_page").hasClass("ison-doc")?(e(n+" .magazine").turn("display","single"),$turn_options=e(n+" .magazine").turn("options"),e(n+" .magazine").turn("size",$turn_options.width,2*$turn_options.height),e(n+" .magazine-viewport").addClass("double"),e(n+" #cg_page").removeClass("ison-doc").addClass("ison-book-open"),e(n+" #cg_page").attr({title:t.twopages})):(e(n+" .magazine").turn("display","double"),$turn_options=e(n+" .magazine").turn("options"),e(n+" .magazine").turn("size",$turn_options.width,$turn_options.height),e(n+" #cg_page").removeClass("ison-book-open").addClass("ison-doc"),e(n+" #cg_page").attr({title:t.onepage}),e(n+" .magazine-viewport").removeClass("double"),e(n+" .magazine").css("height:"+$turn_options.height),e(n+" .magazine-viewport").css("height:"+$turn_options.height))}),e(window).resize(function(){resizeViewport(n)}).bind("orientationchange",function(){resizeViewport(n)}),("single"==t.init||g&&"single"==t.init_phone)&&(e(n+" .magazine").addClass("animated"),e(n+" .magazine").turn("display","single"),$turn_options=e(n+" .magazine").turn("options"),e(n+" .magazine").turn("size",$turn_options.width,2*$turn_options.height),e(n+" .magazine-viewport").addClass("double"),e(n+" #cg_page").removeClass("ison-doc").addClass("ison-book-open"),e(n+" #cg_page").attr({title:t.twopages})),"true"==t.auto){var u=setInterval(l,parseInt(t.auto_delay));e(n).mouseenter(function(){clearInterval(u)}).mouseleave(function(){u=setInterval(l,parseInt(t.auto_delay))})}function l(){$max=e(n+" .magazine").turn("pages"),$curr=e(n+" .magazine").turn("page"),$curr==$max?e(n+" .magazine").turn("page",1):e(n+" .magazine").turn("next")}}jQuery(document).ready(function(e){e(".cg_flip_main").each(function(){var a=e(this).attr("data");if("undefined"==typeof Joomla||void 0===Joomla.getOptions);else var t=Joomla.getOptions("cg_flip_"+a);void 0!==t&&go_flip(e,a,t,!1)})});